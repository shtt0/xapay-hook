はい、承知いたしました。
先ほどの README.md に、ご指定の Canva コンセプト資料へのリンクを追加します。

サービスのコンセプトを説明する「1. XApay とは？」のセクションに、資料へのリンクを追記しました。

---

### README.md (修正版)

# xapay-hooks

**Xahau ネットワーク上で PayPay のような決済体験を実現する PoC (Proof of Concept)**

`xapay-hooks`は、Xahau ネットワーク上で日本円ステーブルコインを用いた決済サービス「XApay」のバックエンドロジックを、**Xahau Hooks**で実装した Proof of Concept（概念実証）プロジェクトです。

## 1\. XApay とは？

XApay は、多くの人が利用している「PayPay」のような手軽なキャッシュレス決済を、次世代のブロックチェーンである**Xahau ネットワーク**上で実現することを目指す決済サービスです。

- **コンセプト**: ユーザーが日常の買い物で、迅速かつスムーズに支払いを行える体験を提供します。
- **利用通貨**: ハッカソン用に発行された日本円ステーブルコイン（テストコイン）を使用します。
- **利用シーン**: 全国のスーパーマーケットや小売店での支払いを想定しています。
- **仕組み**: XApay はユーザーと店舗の間に立つ決済事業者です。ユーザーから預かった代金を、店舗が求めるタイミングでまとめて日本円で振り込みます。（※本プロジェクトでは振込部分はダミー画面で実装）

より詳細なコンセプトやデモ画面については、以下の資料もご覧ください。

▶ **[コンセプト資料 (Canva)](https://www.canva.com/design/DAGqbpw0TtQ/7_sqrkE8oNG9mV0a_6EBpA/edit?utm_content=DAGqbpw0TtQ&utm_campaign=designshare&utm_medium=link2&utm_source=sharebutton)**

## 2\. 技術的な特徴

本プロジェクトは、Xahau の先進的な機能を利用して、優れた UX（ユーザー体験）と高いセキュリティの両立を目指しています。

### Xahau Hooks によるスマートな決済処理

Xahau のスマートコントラクト機能である**Hook**に、決済ロジック（残高管理、署名検証、自動送金など）を直接書き込んでいます。これにより、中央集権的なサーバーに依存することなく、安全で自動化された取引を Xahau の台帳上で直接実行します。

### ペイメントチャネルによる UX 向上

ユーザーが支払いを行うたびにブロックチェーンへの署名（承認作業）をしていては、時間がかかり不便です。XApay では**ペイメントチャネル**という技術を利用することで、ユーザーは一度残高をチャージすれば、都度の署名なしでスムーズな支払いが可能になります。これにより、既存の決済アプリと遜色ないユーザー体験を実現します。

### Web3Auth による簡単なアカウント開設

ユーザーは使い慣れたメールアドレスでログインするだけで、裏側で自動的に Xahau のアカウントが作成されます。暗号資産の知識がない方でも、簡単にサービスを使い始めることができます。

## 3\. Hook の動作フロー

ユーザー（例: Alice）が XApay を利用する際の、オンチェーンでの一連の流れです。

1.  **事前準備 (運営)**

    - XApay のサービスアカウントに、このリポジトリの Hook (`xapay.c`) を設置します。

2.  **チャージ (ユーザー)**

    - Alice が銀行振込などで日本円を入金します（という想定のダミー操作）。
    - 運営は入金を確認後、「Alice のアドレスに XX 円分の残高を追加する」という指示を Hook アカウントにトランザクションとして送信します。
    - Hook は内部台帳（State）に、Alice のペイメントチャネル情報（チャージ総額など）を記録します。

3.  **支払い (ユーザー)**

    - 店舗の POS 端末が Alice の QR コードを読み取り、XApay の API 経由で決済を通知します。
    - Hook が Alice の残高から支払い額を差し引き、取引履歴をオンチェーンに記録します。この際、Alice 自身の署名操作は不要です。

4.  **払い戻し・チャネル閉鎖 (ユーザー/運営)**

    - ユーザーは、チャージした残高のうち未利用分をいつでも自身のウォレットに払い戻すことができます。
    - 運営がチャネルを閉鎖する指示を出すと、Hook は内部台帳を参照し、それまでの利用総額を店舗へ、未使用残高をユーザーへ自動的に送金（emit）して精算します。

## 4\. 使い方 (開発者向け)

1.  **Hook のデプロイ**:
    `xapay.c` を[作法に従って](https://hooks-builder.xrpl.org/)ビルドし、Xahau ネットワーク上のサービスアカウントに`SetHook`トランザクションを送信してデプロイします。

2.  **トランザクションの送信**:
    テスト用の JSON ファイルを参考に、`recharge`（チャージ）や`withdraw`（払い戻し）などの操作に対応するトランザクションを作成し、ネットワークに送信します。

3.  **動作確認**:
    Xahau のエクスプローラーやコンソールコマンドを使い、トランザクションの結果や Hook アカウントの内部台帳（State）が意図通りに変化することを確認します。

## 5\. 現在のステータスと課題

このプロジェクトは現在開発途上にあり、いくつかの課題が残っています。

### 🚨 [要修正] MEMO の判定ロジックの不具合

現在、Hook がトランザクションの`Memos`フィールドを正しく認識できないという重大な問題が発生しています。

- **問題**: トランザクションに`Memos`フィールドを含め、操作種別（`recharge`, `withdraw`など）を 16 進数で指定しても、Hook 側のロジックがそれを読み取れていません。
- **原因**: 送信側の JSON 形式は正しいと考えられるため、Hook のソースコード (`xapay.c`) における MEMO データの取得・比較処理に不具合がある可能性が高いです。
- **現在の挙動**: この問題により、意図した処理が実行されず、トランザクションが `Accepted (unhandled)` として扱われてしまいます。**このデバッグと修正が最優先課題です。**

<!-- end list -->

```json
// 送信しているMemosフィールドの例
"Memos": [
  {
    "Memo": {
      "MemoData": "7265636861726765", // "recharge" の16進数表現
      "MemoType": "68757874657874",   // "huxtext" の16進数表現 (例)
      "MemoFormat": "74657874"         // "text" の16進数表現 (例)
    }
  }
]
```

### 今後のタスク

- 上記 MEMO 問題のデバッグ・修正
- テストシナリオの拡充とテストの自動化
- エラーハンドリングの強化

## 6\. コントリビューション

このプロジェクトはまだ開発の初期段階です。バグ報告、機能提案、プルリクエストなど、あらゆるコントリビューションを歓迎します。
何かお気づきの点があれば、お気軽に[Issue](https://www.google.com/search?q=https://github.com/your-repo/xapay-hooks/issues)を立ててください。
